
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark)"
    href="https://lpenaud.github.io/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark)"
          href="https://lpenaud.github.io/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
          href="https://lpenaud.github.io/theme/pygments/manni.min.css">


  <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/font-awesome/css/solid.css">

    <link href="https://lpenaud.github.io/style.css" rel="stylesheet">

    <link href="https://lpenaud.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Loïc Penaud Atom">


    <link rel="shortcut icon" href="https://lpenaud.github.io/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://lpenaud.github.io/images/favicon.ico" type="image/x-icon">


    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333">

<meta name="author" content="Penaud Loïc" />
<meta name="description" content="Conversion, gestion de flux audio / vidéo en ligne de commande à l’aide de ffmpeg et mkvtoolnix." />
<meta name="keywords" content="cli, video">


<meta property="og:site_name" content="Loïc Penaud"/>
<meta property="og:title" content="La gestion vidéo en ligne de commande"/>
<meta property="og:description" content="Conversion, gestion de flux audio / vidéo en ligne de commande à l’aide de ffmpeg et mkvtoolnix."/>
<meta property="og:locale" content="fr_FR"/>
<meta property="og:url" content="https://lpenaud.github.io/video-cli.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-02-22 17:47:38+01:00"/>
<meta property="article:modified_time" content="2020-02-22 17:47:29+01:00"/>
<meta property="article:author" content="https://lpenaud.github.io/author/penaud-loic.html">
<meta property="article:section" content="cli"/>
<meta property="article:tag" content="cli"/>
<meta property="article:tag" content="video"/>
<meta property="og:image" content="https://lpenaud.github.io/images/profile.jpg">

  <title>Loïc Penaud &ndash; La gestion vidéo en ligne de commande</title>

</head>
<body >
  <aside>
    <div>
      <a href="https://lpenaud.github.io">
        <img src="https://lpenaud.github.io/images/profile.jpg" alt="Loïc Penaud" title="Loïc Penaud">
      </a>

      <h1>
        <a href="https://lpenaud.github.io">Loïc Penaud</a>
      </h1>

<p>Développeur Back-end</p>


      <ul class="social">
          <li>
            <a  class="sc-envelope" href="mailto:l.penaud@zaclys.net" target="_blank">
              <i class="fas fa-envelope"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/lpenaud" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/lo%C3%AFc-penaud-296067129/" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/LoicPenaud" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="https://lpenaud.github.io">Accueil</a>


      <a href="https://lpenaud.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="video-cli">La gestion vidéo en ligne de commande</h1>
    <p>
      Posté le sam. 22 février 2020 dans <a href="https://lpenaud.github.io/category/cli.html">cli</a>

    </p>
  </header>


  <div>
    <p>Ayant un serveur de fichier qui contient majoritairement de l’audio et de la vidéo.
Il peut arriver que j’ai besoin de faire de la conversion vidéo pour que ma Raspeberry Pi 3 puisse lire ces fichiers sans ralentissement et sans perte d’image.
Cet article a donc pour but de faire un petit tour d’horizon sur les outils en ligne de commande disponible pour gérer les fichiers vidéos.</p>
<p>Tous les logiciels dans cet article peuvent être installés via le gestionnaire de paquet de votre système d’exploitation (<tt class="docutils literal">apt</tt>, <tt class="docutils literal">pacman</tt>, <tt class="docutils literal">choco</tt>, etc).</p>
<p>Pour toutes questions n’hésiter pas à m’envoyer un email à <a class="reference external" href="mailto:l.penaud&#64;zaclys.net">l.penaud&#64;zaclys.net</a>.</p>
<hr class="docutils" />
<div class="contents topic" id="sommaire">
<p class="topic-title first">Sommaire</p>
<ul class="simple">
<li><a class="reference internal" href="#mediainfo" id="id9">Mediainfo</a></li>
<li><a class="reference internal" href="#mkvtoolnix" id="id10">MKVToolNix</a><ul>
<li><a class="reference internal" href="#mkvinfo" id="id11">mkvinfo</a><ul>
<li><a class="reference internal" href="#usage" id="id12">Usage</a></li>
<li><a class="reference internal" href="#exemple" id="id13">Exemple</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mkvmerge" id="id14">mkvmerge</a><ul>
<li><a class="reference internal" href="#id3" id="id15">Usage</a></li>
<li><a class="reference internal" href="#ajout-dune-piste-de-sous-titre" id="id16">Ajout d’une piste de sous-titre</a></li>
<li><a class="reference internal" href="#selection-de-pistes" id="id17">Sélection de pistes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mkvpropedit" id="id18">mkvpropedit</a><ul>
<li><a class="reference internal" href="#id5" id="id19">Usage</a></li>
<li><a class="reference internal" href="#modification-de-la-langue-dune-piste" id="id20">Modification de la langue d’une piste</a></li>
<li><a class="reference internal" href="#modification-du-titre-dun-fichier-mkv" id="id21">Modification du titre d’un fichier mkv</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mkvextract" id="id22">mkvextract</a><ul>
<li><a class="reference internal" href="#id7" id="id23">Usage</a></li>
<li><a class="reference internal" href="#extraction-dune-piste-de-sous-titre" id="id24">Extraction d’une piste de sous-titre</a></li>
<li><a class="reference internal" href="#extraction-de-la-piste-video" id="id25">Extraction de la piste vidéo</a></li>
<li><a class="reference internal" href="#extraction-des-pistes-audio" id="id26">Extraction des pistes audio</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ffmpeg" id="id27">ffmpeg</a></li>
<li><a class="reference internal" href="#aide-memoire" id="id28">Aide-mémoire</a><ul>
<li><a class="reference internal" href="#mkvmerge-general" id="id29">mkvmerge - général</a></li>
<li><a class="reference internal" href="#mkvmerge-ordre-des-arguments" id="id30">mkvmerge - ordre des arguments</a></li>
<li><a class="reference internal" href="#mkvmerge-sous-titre" id="id31">mkvmerge – sous-titre</a></li>
<li><a class="reference internal" href="#mkvmerge-fichier-conteneur" id="id32">mkvmerge – fichier conteneur</a></li>
<li><a class="reference internal" href="#mkvpropedit-general" id="id33">mkvpropedit – général</a></li>
<li><a class="reference internal" href="#mkvextract-general" id="id34">mkvextract – général</a></li>
<li><a class="reference internal" href="#mkvextract-pistes" id="id35">mkvextract – pistes</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="mediainfo">
<h2><a class="toc-backref" href="#sommaire">Mediainfo</a></h2>
<p>Mediainfo est un logiciel qui permet d’obtenir la liste des flux contenue dans un fichier container comme le <strong>Matroska (mkv)</strong> par exemple.
Il est possible d’utiliser ce logiciel en ligne de commande ou avec une interface graphique.</p>
<p>Son utilisation est très simple. En effet pour obtenir les informations d’un fichier il suffit de faire :</p>
<pre class="code literal-block">
$ mediainfo &lt;chemin vers une fichier multimédia&gt;
</pre>
</div>
<div class="section" id="mkvtoolnix">
<h2><a class="toc-backref" href="#sommaire">MKVToolNix</a></h2>
<p>MKVToolNix est un logiciel qui permet de lister, d’extraire, de mélanger différents flux dans des fichiers mkv.</p>
<p>Il se découpe en plusieurs sous-commandes :</p>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><a class="reference internal" href="#mkvinfo" id="id36">mkvinfo</a></li>
<li><a class="reference internal" href="#mkvmerge" id="id37">mkvmerge</a></li>
<li><a class="reference internal" href="#mkvpropedit" id="id38">mkvpropedit</a></li>
<li><a class="reference internal" href="#mkvextract" id="id39">mkvextract</a></li>
</ul>
</div>
<div class="section" id="mkvinfo">
<h3><a class="toc-backref" href="#sommaire">mkvinfo</a></h3>
<p>La commande <tt class="docutils literal">mkvinfo</tt> permet de lister tous les différents flux dans d’un fichier conteneur sous la forme d’un arbre.</p>
<div class="section" id="usage">
<h4><a class="toc-backref" href="#sommaire">Usage</a></h4>
<pre class="code literal-block">
$ mkvinfo &lt;chemin vers une fichier multimédia&gt;
</pre>
<p>Pour un usage plus avancé je vous redirige vers la <a class="reference external" href="https://mkvtoolnix.download/doc/mkvinfo.html">documentation</a>
ou à la section <a class="reference internal" href="#aide-memoire">Aide-mémoire</a>.</p>
<p>Les différentes branches de l’arbre sont :</p>
<ul class="simple">
<li><strong>Entête EBML</strong> : Les données d’entête (version du format de fichier…).</li>
<li><strong>Segment</strong> : Pour simplifier, cette section présente méta-données du fichier cela peut-être le titre de la vidéo qui sera affiché par lecteur multimédia, et l’application de multiplexage (comme mkvmerge).</li>
<li><strong>Pistes</strong> : Liste des flux vidéo, audio et sous-titre avec leurs informations associées, s’affiche par ordre croisant d’id.</li>
<li><strong>Pièces jointes</strong> : Les pièces jointes peuvent être des images (par exemple la couverture du DVD), du texte…</li>
<li><strong>Chapitres</strong> : Informations diverses sur les chapitres du fichier (comme sur un DVD).</li>
</ul>
</div>
<div class="section" id="exemple">
<h4><a class="toc-backref" href="#sommaire">Exemple</a></h4>
<p>Exemple de sortie avec un fichier (<tt class="docutils literal">movie.mkv</tt>) qui a :</p>
<ul class="simple">
<li>1 piste vidéo au format H.264 en 1920 x 816 pixels</li>
<li>2 pistes audio 6 canaux l’une en anglais et l’autre en français</li>
<li>2 pistes de sous-titre l’une avec tous les dialogues et l’autre avec la traduction des mots à l’écran (forced)</li>
</ul>
<pre class="code literal-block">
$ mkvinfo movie.mkv
+ Entête EBML
|+ Version EBML: 1
|+ Version EBML lue: 1
|+ Longueur maximale de l'ID EBML: 4
|+ Longueur maximale de la taille EBML: 8
|+ Type de document: matroska
|+ Version du type de document: 2
|+ Version lue du type de document: 2
+ Segment: taille 8211844081
|+ Tête de positionnement (sous-entrées ignorées)
|+ Vide EBML: taille 4025
|+ Informations de segment
| + Échelle d'horodatage: 1000000
| + Application de multiplexage: libebml v1.3.0 + libmatroska v1.4.1
| + Écriture de l'application: mkvmerge v7.0.0 ('Where We Going') 32bit built on Jun  9 2014 15:08:34
| + Durée: 01:46:39.456000000
| + Date: Mon Mar 02 20:29:35 2015 UTC
| + UID de segment: 0xa2 0x75 0xe4 0xd1 0x70 0x23 0x8b 0x90 0x90 0x0b 0x73 0xe0 0x9d 0xcb 0xf3 0xd2
|+ Pistes
| + Piste
|  + Numéro de la piste: 1 (ID de piste pour mkvmerge et mkvextract : 0)
|  + UID de piste: 1
|  + Type de piste: vidéo
|  + Signal de laçage: 0
|  + Cache minimal: 1
|  + Identifiant du codec: V_MPEG4/ISO/AVC
|  + Données privées de codec: taille 41 (profil AVC/H.264 : High &#64;L4.1)
|  + Durée par défaut: 00:00:00.041708333 (23.976 trames/champs par seconde pour une piste vidéo) |  + Piste vidéo
|   + Largeur (pixel): 1920
|   + Hauteur (pixel): 816
|   + Largeur à l'écran: 1920
|   + Hauteur à l'écran: 816
| + Piste
|  + Numéro de la piste: 2 (ID de piste pour mkvmerge et mkvextract : 1)
|  + UID de piste: 10148295179763971202
|  + Type de piste: audio
|  + Identifiant du codec: A_DTS
|  + Durée par défaut: 00:00:00.010666666 (93.750 trames/champs par seconde pour une piste vidéo) |  + Langue: fre
|  + Piste audio
|   + Fréquence d'échantillonnage: 48000
|   + Canaux: 6
| + Piste
|  + Numéro de la piste: 3 (ID de piste pour mkvmerge et mkvextract : 2)
|  + UID de piste: 1829564080678812061
|  + Type de piste: audio
|  + Signal « Piste par défaut »: 0
|  + Identifiant du codec: A_AC3
|  + Durée par défaut: 00:00:00.032000000 (31.250 trames/champs par seconde pour une piste vidéo) |  + Piste audio
|   + Fréquence d'échantillonnage: 48000
|   + Canaux: 6
| + Piste
|  + Numéro de la piste: 4 (ID de piste pour mkvmerge et mkvextract : 3)
|  + UID de piste: 12492895828352048821
|  + Type de piste: sous-titres
|  + Signal de laçage: 0
|  + Identifiant du codec: S_TEXT/UTF8
|  + Langue: fre
|  + Nom: French Forced
| + Piste
|  + Numéro de la piste: 5 (ID de piste pour mkvmerge et mkvextract : 4)
|  + UID de piste: 18398026066537722243
|  + Type de piste: sous-titres
|  + Signal « Piste par défaut »: 0
|  + Signal de laçage: 0
|  + Identifiant du codec: S_TEXT/UTF8
|  + Langue: fre
|+ Vide EBML: taille 1203
|+ Grappe
</pre>
</div>
</div>
<div class="section" id="mkvmerge">
<h3><a class="toc-backref" href="#sommaire">mkvmerge</a></h3>
<p>La commande <tt class="docutils literal">mkvmerge</tt> est très pratique puisqu’elle
nous permet de créer des fichiers mkv en mélangeant plusieurs fichiers qui deviendront des pistes.</p>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#sommaire">Usage</a></h4>
<pre class="code literal-block">
$ mkvmerge -o &lt;fichier de sortie&gt; [options] &lt;liste de fichier d’entrée (audio, vidéo, sous-titre, conteneur…)&gt;
</pre>
<p>Pour un usage plus avancé je vous redirige vers la <a class="reference external" href="https://mkvtoolnix.download/doc/mkvmerge.html">documentation</a>
ou à la section <a class="reference internal" href="#aide-memoire">Aide-mémoire</a>.</p>
</div>
<div class="section" id="ajout-dune-piste-de-sous-titre">
<h4><a class="toc-backref" href="#sommaire">Ajout d’une piste de sous-titre</a></h4>
<p>En prenant le fichier de la partie précédente <a class="reference internal" href="#exemple">Exemple</a>
et que je souhaite rajouter une piste de sous-titre anglaise en format texte encodé en <em>ISO-8859-1</em>
(format beaucoup utilisé sur sous-titre).</p>
<p>Je devrai taper la commande suivante :</p>
<pre class="code literal-block">
$ mkvmerge -o movie-subtitled.mkv --sub-charset 0:iso-8859-1 --language 0:eng subtitle.srt movie.mkv
mkvmerge v43.0.0 ('The Quartermaster') 64-bit
« subtitle.srt » : utilisation du démultiplexeur pour le format «&nbsp;Sous-titres SRT&nbsp;».
« movie.mkv » : utilisation du démultiplexeur pour le format «&nbsp;Matroska&nbsp;».
« subtitle.srt » piste 0 : utilisation du module de sortie pour le format «&nbsp;sous-titres texte&nbsp;».
« movie.mkv » piste 0 : utilisation du module de sortie pour le format «&nbsp;AVC/H.264&nbsp;».
« movie.mkv » piste 1 : utilisation du module de sortie pour le format «&nbsp;DTS&nbsp;».
« movie.mkv » piste 2 : utilisation du module de sortie pour le format «&nbsp;AC-3&nbsp;».
« movie.mkv » piste 3 : utilisation du module de sortie pour le format «&nbsp;sous-titres texte&nbsp;».
« movie.mkv » piste 4 : utilisation du module de sortie pour le format «&nbsp;sous-titres texte&nbsp;».
Le fichier « movie-subtitled.mkv » est ouvert en écriture.
Progression : 100%
Les entrées CUE (l'index) sont en cours d’écriture…
Le multiplexage a pris 33 secondes.
</pre>
<p>Que fait exactement cette ligne de commande ?
Faisons du pas à pas avec les arguments :</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">-o</span> <span class="pre">movie-subtitled.mkv</span></tt> : Le fichier de sortie de la fusion sera <tt class="docutils literal"><span class="pre">movie-subtitled.mkv</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--sub-charset</span> <span class="pre">0:iso-8859-1</span></tt> : On précise que la piste 0 sera encodé en <em>ISO-8859-1</em></li>
<li><tt class="docutils literal"><span class="pre">--language</span> 0:eng</tt> : On précise que la piste 0 sera en anglais</li>
<li><tt class="docutils literal">subtitle.srt</tt> : On donne le chemin du fichier sous-titre qui sera la piste 0</li>
<li><tt class="docutils literal">movie.mkv</tt> : On donne le chemin du fichier mkv pour obtenir les autres pistes qui seront décalés automatiquement.</li>
</ol>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Si vous voulez que le lecteur vidéo lise cette piste par défaut vous pouvez rajouter l’option <tt class="docutils literal"><span class="pre">--default-track</span> 0</tt>
dans les options de <tt class="docutils literal">subtitle.srt</tt>, on le rentrant juste avant celui-ci.</p>
</div>
</div>
<div class="section" id="selection-de-pistes">
<h4><a class="toc-backref" href="#sommaire">Sélection de pistes</a></h4>
<p>Maintenant imaginons que vous souhaitez garder seulement l’audio anglais et supprime tous les sous-titres
parce que votre ami anglais en a que faire des sous-titres en français.</p>
<p>On pourra taper la commande suivante :</p>
<pre class="code literal-block">
$ mkvmerge -o movie-eng.mkv --audio-tracks 2 --no-subtitles movie.mkv
mkvmerge v43.0.0 ('The Quartermaster') 64-bit
« movie.mkv » : utilisation du démultiplexeur pour le format «&nbsp;Matroska&nbsp;».
« movie.mkv » piste 0 : utilisation du module de sortie pour le format «&nbsp;AVC/H.264&nbsp;».
« movie.mkv » piste 2 : utilisation du module de sortie pour le format «&nbsp;AC-3&nbsp;».
Le fichier « movie-eng.mkv » est ouvert en écriture.
Progression : 100%
Les entrées CUE (l'index) sont en cours d’écriture…
Le multiplexage a pris 1 minute 18 secondes.
</pre>
<p>Découpons les arguments :</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">-o</span> <span class="pre">movie-eng.mkv</span></tt> : Fichier de sortie</li>
<li><tt class="docutils literal"><span class="pre">--audio-tracks</span> 2</tt> : Sélection de la piste audio n°2 (l’anglaise)</li>
<li><tt class="docutils literal"><span class="pre">--no-subtitles</span></tt> : Précise qu’on ne veut pas garder les pistes de sous-titre</li>
<li><tt class="docutils literal">movie.mkv</tt> : Fichier d’entrée.</li>
</ol>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Vous pouvez sélectionner plusieurs pistes en séparant les pistes avec des virgules (<tt class="docutils literal"><span class="pre">--audio-tracks</span> 1,2</tt>).
La sélection des pistes se fait toujours sous la forme <tt class="docutils literal"><span class="pre">--&lt;type&gt;-tracks</span></tt>.
Tout comme il y a des commandes sous la forme <tt class="docutils literal"><span class="pre">--no-&lt;type&gt;</span></tt> pour ignorer les pistes.
Pour plus d’information, voir la section <a class="reference internal" href="#mkvmerge-fichier-conteneur">mkvmerge – fichier conteneur</a> de l’<a class="reference internal" href="#aide-memoire">aide-mémoire</a>.</p>
</div>
</div>
</div>
<div class="section" id="mkvpropedit">
<h3><a class="toc-backref" href="#sommaire">mkvpropedit</a></h3>
<p>La commande <tt class="docutils literal">mkvpropedit</tt> permet d’éditer les propriétés d’un fichier mkv.
Elle est utile lors d’un oubli dans <tt class="docutils literal">mkvmerge</tt>.</p>
<div class="admonition hint">
<p class="first admonition-title">Indication</p>
<p class="last">Cette commande ne permet pas d’ajouter ou de supprimer des pistes.</p>
</div>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#sommaire">Usage</a></h4>
<pre class="code literal-block">
$ mkvpropedit [options] &lt;chemin vers un fichier multimédia&gt;
</pre>
<p>Pour un usage plus avancé je vous redirige vers la <a class="reference external" href="https://mkvtoolnix.download/doc/mkvpropedit.html">documentation</a>
ou à la section <a class="reference internal" href="#aide-memoire">Aide-mémoire</a>.</p>
</div>
<div class="section" id="modification-de-la-langue-dune-piste">
<h4><a class="toc-backref" href="#sommaire">Modification de la langue d’une piste</a></h4>
<p>Modifions la langue de la piste vidéo (0) pour préciser qu’elle est française.</p>
<pre class="code literal-block">
$ mkvpropedit --edit track:0 --set language=fre movie.mkv
</pre>
<p>Découpons les arguments :</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">--edit</span> track:0</tt> : Sélectionne la piste 0 qui correspond à la piste vidéo dans notre cas.</li>
<li><tt class="docutils literal"><span class="pre">--set</span> language=fre</tt> : Attribution de la langue française à la piste.</li>
<li><tt class="docutils literal">movie.mkv</tt>: Fichier qui va être modifié.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’option <tt class="docutils literal"><span class="pre">--set</span></tt> permet l’attribution d’une propriété mais si celle-ci n’existe pas.</p>
</div>
</div>
<div class="section" id="modification-du-titre-dun-fichier-mkv">
<h4><a class="toc-backref" href="#sommaire">Modification du titre d’un fichier mkv</a></h4>
<p>Modifions le titre du fichier mkv par «&nbsp;Titre&nbsp;».</p>
<pre class="code literal-block">
$ mkvpropedit --edit info --set &quot;title=Titre&quot; movie.mkv
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On notera que cette fois-ci, nous n’avons pas besoins de spécifier une piste
vu que c’est une propriété du fichier et non pas d’une piste.</p>
</div>
</div>
</div>
<div class="section" id="mkvextract">
<h3><a class="toc-backref" href="#sommaire">mkvextract</a></h3>
<p>La commande <tt class="docutils literal">mkvextract</tt> permet d’extraire les pistes et les pièces jointe d’un fichier conteneur.</p>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#sommaire">Usage</a></h4>
<pre class="code literal-block">
$ mkvextract &lt;chemin vers un fichier conteneur d’entré&gt; &lt;type d’extraction&gt; &lt;options&gt; ...[&lt;numero piste&gt;:&lt;fichier de sortie&gt;]
</pre>
<p>Pour un usage plus avancé je vous redirige vers la <a class="reference external" href="https://mkvtoolnix.download/doc/mkvextract.html">documentation</a>
ou à la section <a class="reference internal" href="#aide-memoire">Aide-mémoire</a>.</p>
</div>
<div class="section" id="extraction-dune-piste-de-sous-titre">
<h4><a class="toc-backref" href="#sommaire">Extraction d’une piste de sous-titre</a></h4>
<p>Extrayons la piste de sous-titre française du fichier <tt class="docutils literal">movie.mkv</tt>.</p>
<pre class="code literal-block">
$ mkvextract movie.mkv tracks 4:french-subtitle.srt
Extraction de la piste 4 avec le codec « S_TEXT/UTF8 » dans le fichier « french-subtitle.srt ». Format de conteneur : SRT text subtitles
Progression : 100%
</pre>
<div class="admonition hint">
<p class="first admonition-title">Indication</p>
<p class="last">Ici l’extension du fichier de sortie est <tt class="docutils literal">.srt</tt>, car c’est l’extension du format texte du sous-titre du fichier.
Voir <a class="reference internal" href="#exemple">Exemple</a> vers la fin de l’arbre de l’aperçu.</p>
</div>
</div>
<div class="section" id="extraction-de-la-piste-video">
<h4><a class="toc-backref" href="#sommaire">Extraction de la piste vidéo</a></h4>
<p>Extrayons la piste vidéo pour pouvoir l’isoler des autres pistes.</p>
<pre class="code literal-block">
$ mkvextract movie.mkv tracks 0:video.h264
Extraction de la piste 0 avec le codec « V_MPEG4/ISO/AVC » dans le fichier « video.h264 ». Format de conteneur : AVC/H.264 elementary stream
Progression : 100%
</pre>
<div class="admonition hint">
<p class="first admonition-title">Indication</p>
<p class="last">Ici l’extension du fichier de sortie est <tt class="docutils literal">.h264</tt>, car c’est l’extension du format vidéo du fichier.
Voir <a class="reference internal" href="#exemple">Exemple</a> vers le début de la branche piste de l’arbre de l’aperçus.</p>
</div>
</div>
<div class="section" id="extraction-des-pistes-audio">
<h4><a class="toc-backref" href="#sommaire">Extraction des pistes audio</a></h4>
<p><tt class="docutils literal">mkvextract</tt> nous permet d’extraire plusieurs pistes en même temps.
Illustrons ça tout de suite en extrayant les pistes audio du fichier <tt class="docutils literal">movie.mkv</tt>.</p>
<pre class="code literal-block">
$ mkvextract movie.mkv tracks 1:audio-fre.dts 2:audio-eng.ac3
Extraction de la piste 1 avec le codec « A_DTS » dans le fichier « audio-fre.dts ». Format de conteneur : Digital Theater System (DTS)
Extraction de la piste 2 avec le codec « A_AC3 » dans le fichier « audio-eng.ac3 ». Format de conteneur : Dolby Digital (AC-3)
Progression : 100%
</pre>
</div>
</div>
</div>
<div class="section" id="ffmpeg">
<h2><a class="toc-backref" href="#sommaire">ffmpeg</a></h2>
<p><strong>À venir</strong></p>
</div>
<div class="section" id="aide-memoire">
<h2><a class="toc-backref" href="#sommaire">Aide-mémoire</a></h2>
<div class="section" id="mkvmerge-general">
<h3><a class="toc-backref" href="#sommaire">mkvmerge - général</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--language</span> &lt;id <span class="pre">piste&gt;:&lt;langue</span> dans le format ISO <span class="pre">639-2</span> ou ISO <span class="pre">639-1&gt;</span></tt> : Spécifie la langue d’une piste</li>
<li><tt class="docutils literal"><span class="pre">--default-track</span> &lt;id piste&gt;</tt> : Précise si la piste devra lus par défaut par les lecteurs</li>
<li><tt class="docutils literal"><span class="pre">--title</span> &lt;titre&gt;</tt> : Permet de donner un titre au fichier.</li>
<li><tt class="docutils literal"><span class="pre">-o</span> &lt;fichier de sortie mkv&gt;</tt> : Fichier mkv de sortie.</li>
</ul>
</div>
<div class="section" id="mkvmerge-ordre-des-arguments">
<h3><a class="toc-backref" href="#sommaire">mkvmerge - ordre des arguments</a></h3>
<div class="admonition caution">
<p class="first admonition-title">Avertissement!</p>
<p class="last">L’ordre des arguments est important. Il faut toujours commencer par le <tt class="docutils literal"><span class="pre">-o</span></tt> pour indiquer le fichier de sortie.
Puis les options appliquées au premier fichier, ensuite le nom de celui-ci et pareil pour les autres.</p>
</div>
<p><strong>Exemple</strong> :</p>
<pre class="code literal-block">
$ mkvmerge --title &quot;Titre&quot; -o movie.mkv --no-subtitle movie-subtitled.mkv --audio-tracks 1 movie-audio.mkv
</pre>
<p><strong>Contre-exemple</strong> :</p>
<pre class="code literal-block">
$ mkvmerge movie-subtitled.mkv --no-subtitle movie-audio.mkv --audio-tracks 1 -o movie.mkv --title &quot;Titre&quot;
</pre>
</div>
<div class="section" id="mkvmerge-sous-titre">
<h3><a class="toc-backref" href="#sommaire">mkvmerge – sous-titre</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--sub-charset</span> &lt;id <span class="pre">piste&gt;:&lt;encodage&gt;</span></tt> : Spécifie le codec (non obligatoire si l’encodage du fichier est l’UTF-8) d’une piste de sous-titre</li>
</ul>
</div>
<div class="section" id="mkvmerge-fichier-conteneur">
<h3><a class="toc-backref" href="#sommaire">mkvmerge – fichier conteneur</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--video-track</span></tt> : Sélection des pistes vidéo</li>
<li><tt class="docutils literal"><span class="pre">--audio-track</span></tt> : Sélection des pistes audio</li>
<li><tt class="docutils literal"><span class="pre">--subtitle-track</span></tt> : Sélection des pistes de sous-titre</li>
<li><tt class="docutils literal"><span class="pre">--no-video</span></tt> : Suppression des pistes vidéo</li>
<li><tt class="docutils literal"><span class="pre">--no-audio</span></tt> : Suppression des pistes audio</li>
<li><tt class="docutils literal"><span class="pre">--no-subtitle</span></tt> : Suppression des pistes de sous-titre</li>
</ul>
</div>
<div class="section" id="mkvpropedit-general">
<h3><a class="toc-backref" href="#sommaire">mkvpropedit – général</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--edit</span> <span class="pre">track:&lt;id</span> piste&gt; <span class="pre">--set</span> <span class="pre">&lt;propriété&gt;=&lt;nouvelle</span> valeur&gt;</tt> : Permet d’éditer une propriété d’une piste</li>
<li><tt class="docutils literal"><span class="pre">--edit</span> <span class="pre">track:&lt;id</span> piste&gt; <span class="pre">--add</span> <span class="pre">&lt;propriété&gt;=&lt;nouvelle</span> valeur&gt;</tt> : Permet d’éditer une propriété d’une piste</li>
<li><tt class="docutils literal"><span class="pre">--edit</span> <span class="pre">track:&lt;id</span> piste&gt; <span class="pre">--delete</span> &lt;propriété&gt;</tt> : Permet de supprimer une propriété d’une piste</li>
</ul>
</div>
<div class="section" id="mkvextract-general">
<h3><a class="toc-backref" href="#sommaire">mkvextract – général</a></h3>
<ul class="simple">
<li><tt class="docutils literal">tracks</tt> : Spécifie que nous souhaitons extraire une ou plusieurs pistes du conteneur.</li>
</ul>
</div>
<div class="section" id="mkvextract-pistes">
<h3><a class="toc-backref" href="#sommaire">mkvextract – pistes</a></h3>
<ul class="simple">
<li><tt class="docutils literal">&lt;numero <span class="pre">piste&gt;:&lt;fichier</span> de sortie&gt;</tt> : Spécifie le fichier de sortie de la piste correspondant au numéro donné (cette options peut-être utilisé au temps de fois que l’on souhaite).</li>
</ul>
</div>
</div>

  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://lpenaud.github.io/tag/cli.html">cli</a>
      <a href="https://lpenaud.github.io/tag/video.html">video</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://lpenaud.github.io/about-me.html" title="À propos de moi">
      <i class="fa fa-angle-left"></i> Post précédent
    </a>
    <a class="btn float-right" href="https://lpenaud.github.io/deno-une-nouvelle-facon-dutiliser-le-javascript.html" title="Deno - Une nouvelle façon d'utiliser le JavaScript">
      Post suivant <i class="fa fa-angle-right"></i>
    </a>
  </div>



</article>

    <footer>
<p>
  &copy; Loïc Penaud 2020 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>
Construit avec <a href="http://getpelican.com" target="_blank">Pelican</a> utilisant le thème <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a>
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://lpenaud.github.io/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="light"
          type="text/javascript">
  </script>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Loïc Penaud ",
  "url" : "https://lpenaud.github.io",
  "image": "https://lpenaud.github.io/images/profile.jpg",
  "description": "Site d'article sur l'informatique"
}
</script>


</body>
</html>