
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/pygments/manni.min.css">
  <link rel="stylesheet" type="text/css" href="https://lpenaud.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://lpenaud.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Loïc Penaud Atom">




    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333">

<meta name="author" content="Penaud Loïc" />
<meta name="description" content="Pourquoi Vagrant c’est bien et comment l’installer et l’utiliser" />
<meta name="keywords" content="virtualisation, développement, virtualbox, vagrant, linux, windows">

<meta property="og:site_name" content="Loïc Penaud"/>
<meta property="og:title" content="Vagrant"/>
<meta property="og:description" content="Pourquoi Vagrant c’est bien et comment l’installer et l’utiliser"/>
<meta property="og:locale" content="fr_FR"/>
<meta property="og:url" content="https://lpenaud.github.io/vagrant.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-10-20 19:59:58+02:00"/>
<meta property="article:modified_time" content="2019-10-20 20:00:03+02:00"/>
<meta property="article:author" content="https://lpenaud.github.io/author/penaud-loic.html">
<meta property="article:section" content="Développement"/>
<meta property="article:tag" content="virtualisation"/>
<meta property="article:tag" content="développement"/>
<meta property="article:tag" content="virtualbox"/>
<meta property="article:tag" content="vagrant"/>
<meta property="article:tag" content="linux"/>
<meta property="article:tag" content="windows"/>
<meta property="og:image" content="">

  <title>Loïc Penaud &ndash; Vagrant</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://lpenaud.github.io">
        <img src="https://lpenaud.github.io/theme/img/profile.png" alt="Loïc Penaud" title="Loïc Penaud">
      </a>
      <h1><a href="https://lpenaud.github.io">Loïc Penaud</a></h1>

<p>Développeur web</p>

      <ul class="social">
        <li><a class="sc-envelope-o" href="mailto:l.penaud@zaclys.net" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
        <li><a class="sc-github" href="https://github.com/lpenaud" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/lo%C3%AFc-penaud-296067129/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/LoicPenaud" target="_blank"><i class="fa fa-twitter"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://lpenaud.github.io">Accueil</a>


      <a href="https://lpenaud.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="vagrant">Vagrant</h1>
    <p>
      Posté le dim. 20 octobre 2019 dans <a href="https://lpenaud.github.io/category/developpement.html">Développement</a>

    </p>
  </header>


  <div>
    <p>Vagrant est un outil puissant pour les développeurs surtout lorsqu’on sait s’en servir.</p>
<p>Cet article a pour but de vous faire savoir pourquoi j’ai commencé à utiliser Vagrant et à faire un tour d’horizon sur les fonctionnalités qu’il propose.</p>
<hr class="docutils" />
<div class="contents topic" id="sommaire">
<p class="topic-title first">Sommaire</p>
<ul class="simple">
<li><a class="reference internal" href="#pourquoi-lutiliser" id="id8">Pourquoi l’utiliser&nbsp;?</a><ul>
<li><a class="reference internal" href="#le-probleme-initial" id="id9">Le problème initial</a></li>
<li><a class="reference internal" href="#la-solution" id="id10">La solution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#comment-lutiliser" id="id11">Comment l’utiliser ?</a><ul>
<li><a class="reference internal" href="#premiere-etape-installations" id="id12">Première étape – Installations</a><ul>
<li><a class="reference internal" href="#gnu-linux" id="id13">GNU / Linux</a></li>
<li><a class="reference internal" href="#windows" id="id14">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#seconde-etape-initialisation" id="id15">Seconde étape – Initialisation</a></li>
<li><a class="reference internal" href="#troisieme-etape-lancement" id="id16">Troisième étape – Lancement</a></li>
<li><a class="reference internal" href="#quatrieme-etape-communication" id="id17">Quatrième étape – Communication</a><ul>
<li><a class="reference internal" href="#par-ssh" id="id18">Par ssh</a></li>
<li><a class="reference internal" href="#via-le-repertoire-partage" id="id19">Via le répertoire partagé</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cinquieme-etape-configuration" id="id20">Cinquième étape – Configuration</a><ul>
<li><a class="reference internal" href="#redirection-de-port" id="id21">Redirection de port</a></li>
<li><a class="reference internal" href="#installation-des-dependances-du-projet" id="id22">Installation des dépendances du projet</a></li>
</ul>
</li>
<li><a class="reference internal" href="#aide-memoire" id="id23">Aide-mémoire</a><ul>
<li><a class="reference internal" href="#commandes" id="id24">Commandes</a></li>
<li><a class="reference internal" href="#vagrantfile" id="id25">Vagrantfile</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="pourquoi-lutiliser">
<h2><a class="toc-backref" href="#id8">Pourquoi l’utiliser&nbsp;?</a></h2>
<div class="section" id="le-probleme-initial">
<h3><a class="toc-backref" href="#id9">Le problème initial</a></h3>
<p>Bien que je sois un très grand fan de GNU / Linux parfois j’utilise Windows.
Cependant, je n’apprécie pas Windows en tant que système d’exploitation pour faire du développement
et j’ai trouvé très vite lourd le fait de devoir passer d’un système d’exploitation à un autre à l’aide d’un amorçage double <a class="footnote-reference" href="#id5" id="id1">[1]</a>.</p>
</div>
<div class="section" id="la-solution">
<h3><a class="toc-backref" href="#id10">La solution</a></h3>
<p>Vagrant permet de créer facilement une machine virtuelle sur VirtualBox et plein d’autre hyperviseur.
Ce qui me permet de développer sur GNU / Linux, le tout en étant sur Windows.</p>
<p>De plus à l’aide d’un fichier qu’on appelle <tt class="docutils literal">Vagrantfile</tt> on peut configurer facilement la machine virtuelle.</p>
</div>
</div>
<div class="section" id="comment-lutiliser">
<h2><a class="toc-backref" href="#id11">Comment l’utiliser ?</a></h2>
<div class="section" id="premiere-etape-installations">
<h3><a class="toc-backref" href="#id12">Première étape – Installations</a></h3>
<div class="section" id="gnu-linux">
<h4><a class="toc-backref" href="#id13">GNU / Linux</a></h4>
<p>Si vous êtes sur un système GNU / Linux utiliser votre gestionnaire de paquets en administrateur afin d’installer VirtualBox et Vagrant.</p>
</div>
<div class="section" id="windows">
<h4><a class="toc-backref" href="#id14">Windows</a></h4>
<div class="section" id="virtualbox">
<h5>VirtualBox</h5>
<p>Pour installer VirtualBox, il suffit d’aller sur le site officiel de VirtualBox à cette adresse : <a class="reference external" href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></p>
<p>Puis de choisir la bonne version pour votre système d’exploitation.</p>
<p>Ou vous utiliser <a class="reference external" href="https://chocolatey.org/">chocolatey</a> avec la commande suivante :</p>
<div class="highlight"><pre><span></span>choco install virtualbox
</pre></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Au vu de se prémunir d’un problème d’encodage,
lancer VirtualBox puis aller dans le menu fichiers,
puis changer le dossier par défaut des machines vers un dossier sans espace ni accent à la racine de l’un de vos lecteurs.</p>
</div>
</div>
<div class="section" id="id2">
<h5>Vagrant</h5>
<p>Pour installer Vagrant, il suffit d’aller sur le site officiel de Vagrant à cette adresse : <a class="reference external" href="https://www.vagrantup.com/downloads.html">https://www.vagrantup.com/downloads.html</a></p>
<p>Puis de choisir la bonne version pour votre système d’exploitation.</p>
<p>Ou vous utiliser <a class="reference external" href="https://chocolatey.org/">chocolatey</a> avec la commande suivante :</p>
<div class="highlight"><pre><span></span>choco install vagrant
</pre></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Au vu de se prémunir d’un problème d’encodage,
rajouter la variable suivante dans votre environnement <tt class="docutils literal"><span class="pre">VAGRANT_HOME=&lt;chemin</span> vers un dossier sans espace ni accent à la racine de l’un de vos lecteurs&gt;</tt></p>
</div>
</div>
</div>
</div>
<div class="section" id="seconde-etape-initialisation">
<h3><a class="toc-backref" href="#id15">Seconde étape – Initialisation</a></h3>
<p>Il faut choisir une Vagrant Boxes qui est un système d’exploitation pré-configuré il en existe plein.
Dans notre exemple on choisira la boîte <tt class="docutils literal">ubuntu/bionic64</tt> qui est la dernière version LTF d’ubuntu <a class="footnote-reference" href="#id6" id="id3">[2]</a>.</p>
<p>Puis il suffit de taper la commande suivante dans le répertoire de votre choix :</p>
<div class="highlight"><pre><span></span>vagrant init ubuntu/bionic64
</pre></div>
<p>Cette commande devra générer un fichier nommé <tt class="docutils literal">Vagrantfile</tt>.</p>
</div>
<div class="section" id="troisieme-etape-lancement">
<h3><a class="toc-backref" href="#id16">Troisième étape – Lancement</a></h3>
<p>Une fois que vous avez votre <tt class="docutils literal">Vagrantfile</tt>, vous pouvez taper la commande suivante dans le même répertoire afin de lancer la machine virtuelle :</p>
<div class="highlight"><pre><span></span>vagrant up
</pre></div>
<p>La première fois ça prend toujours un peu plus de temps, car Vagrant télécharge la boîte.</p>
</div>
<div class="section" id="quatrieme-etape-communication">
<h3><a class="toc-backref" href="#id17">Quatrième étape – Communication</a></h3>
<p>Une fois que votre machine virtuelle c’est bien initialisé.
Vous pouvez communiquer avec elle.</p>
<div class="section" id="par-ssh">
<h4><a class="toc-backref" href="#id18">Par ssh</a></h4>
<p>Vous pouvez lancer la commande suivante afin de communiquer en ssh avec la machine virtuelle :</p>
<div class="highlight"><pre><span></span>vagrant ssh
</pre></div>
</div>
<div class="section" id="via-le-repertoire-partage">
<h4><a class="toc-backref" href="#id19">Via le répertoire partagé</a></h4>
<p>En allant listant le contenu du répertoire <tt class="docutils literal">/vagrant</tt> de votre machine virtuelle vous pouvez constater qu’il y a les même fichiers que sur votre machine.
Les machines créées par Vagrant, partage toujours le dossier où il y a le <tt class="docutils literal">Vagrantfile</tt> de votre machine hôte.</p>
<p>Donc si vous créez un fichier dans ce répertoire il sera automatiquement partagé entre la machine hôte et virtuelle.</p>
</div>
</div>
<div class="section" id="cinquieme-etape-configuration">
<h3><a class="toc-backref" href="#id20">Cinquième étape – Configuration</a></h3>
<p>Maintenant nous allons voir des fonctionnalités que propose Vagrant grâce au <tt class="docutils literal">Vagrantfile</tt>.
En effet avoir une belle machine virtuelle c’est bien mais configurée directement c’est mieux.
Cela vous permet de rajouter à vos projets le fichier <tt class="docutils literal">Vagrantfile</tt> qui permettra aux développeurs
et à vous-même d’avoir un environnement de développement prêt même si vous changez d’ordinateur.</p>
<div class="admonition caution">
<p class="first admonition-title">Avertissement!</p>
<p>Pour prendre au compte les modifications du <tt class="docutils literal">Vagrantfile</tt> il faudra que vous redémarriez votre machine virtuelle à l’aide de la commande suivante :</p>
<div class="last"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">reload</span>
</pre></div>
</div></div>
<div class="section" id="redirection-de-port">
<h4><a class="toc-backref" href="#id21">Redirection de port</a></h4>
<p>L’un des points pratique de Vagrant c’est qu’on peut facilement faire de la redirection de port.</p>
<p>C’est d’ailleurs l’une des premières chose que fait Vagrant après avoir allumé votre machine.
Pour le vérifier vous pouvez taper cette ligne de votre terminale :</p>
<div class="highlight"><pre><span></span>ssh vagrant@localhost -p <span class="m">2222</span> -i .vagrant/machines/default/virtualbox/private_key
</pre></div>
<p>Logiquement vous vous êtes connecté à votre machine virtuelle.
En effet, Vagrant créer une redirection de port sur l’hôte local <a class="footnote-reference" href="#id7" id="id4">[3]</a> au port 2222 vers le port 22 de la machine virtuel pour communiquer en ssh.
Comme l’indiquer sur le schéma suivant :</p>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;zoom&quot;:1.5,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;Electron\&quot; modified=\&quot;2019-10-19T16:19:50.687Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.1.0 Chrome/76.0.3809.139 Electron/6.0.7 Safari/537.36\&quot; etag=\&quot;KADBMBf9bEnTG8wHOt1E\&quot; version=\&quot;12.1.0\&quot; type=\&quot;device\&quot; pages=\&quot;2\&quot;&gt;&lt;diagram name=\&quot;Step-1\&quot; id=\&quot;yfRgNmL5UC6R6sA0enTj\&quot;&gt;5VbJbtswEP0aHWto8Zaj1y5o0MVFmxwZaSwRoEWBoi0pX9+hSGqxjLopkqLLxZh5Jocz782QcoLVoXwtSJbc8giY47tR6QRrx/fnXoC/Cqg0MJ65GogFjTTktcCOPoIB7bIjjSDvLZScM0mzPhjyNIVQ9jAiBC/6y/ac9U/NSAwDYBcSNkS/0Ugmpix/1uJvgMaJOXkyN/UeiF1rCskTEvGiAwUbJ1gJzqW2DuUKmKLO0pK5n6W7udm+PX2C/P27bVLA6ZUOtn3KlqYCAal83tC+Dn0i7GjouiVhQlNw/CnDs5YPAq1YWV+pkEfVGjUXsrL84ikoJTrLIqESdhkJ1T8FNhNiiTww9Dw0SZ5pffe0BExqac4GIaE80+pKpV5DP3Yt8ANIUeE+27JGsKrvFq36ntU06SjfgMR0XNxEbmlFwzD7BJaDAcsfRERTIuEo/gI+x+M/jdDxgNAhjWm0ULcHeilPoU8dsiGqO3Rc69x3nXXZ8yrrlVTe2Qho33fwdoty7A6dFUSDG+pn9MBy+FGEcH18JREx/ChecFlfAYxIeuond0kss/Ujp5h20xfeWV80jWFD6PzNru7VdBYocK8E0gUOAtW909Tz6+00GbRTnieDjsKpkv02EpDTR/JQL1ByZyrBOuXJ0pms1YweJc/1k1iPLKNxijaDvQqlRpXiS7UwsORqxHOceJrGX5SzxlZ/ucE+5306HOzgwly/2FhPBzp47mg+ckc4dYsLM/7vKeJdf7vmv1MR+xHXkYRx5Cfhuaw1+S9UCWZXVbl5HlXQbT8o9fXWfpQHm+8=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div><div class="section" id="redirection-de-lhote-local-de-votre-machine">
<h5>Redirection de l’hôte local de votre machine</h5>
<p>Vous pouvez rajouter rediriger d’autres ports de la machine virtuelle.</p>
<p>Imaginons que votre application utilise le port 8000 avec le protocole http et que vous souhaitez y accéder à l’adresse suivante : <tt class="docutils literal">localhost:8000</tt></p>
<p>Décommentez la ligne 31 de votre <tt class="docutils literal">Vagrantfile</tt> :</p>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8080</span><span class="p">,</span> <span class="ss">host_ip</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
</pre></div>
<p>Cette ligne signifie que le port 80 de votre machine virtuelle va être redirigé sur le port 8080 de l’hôte local.
Il suffit donc de changer l’argument <tt class="docutils literal">guest</tt> et <tt class="docutils literal">host</tt> par 8000.</p>
<div class="admonition caution">
<p class="first admonition-title">Avertissement!</p>
<p class="last">Votre application sur votre machine virtuelle ne doit pas écouter que l'hôte local.
Il faut qu’elle écoute son adresse publique.
La solution la plus simple est de changer l’adresse d’écoute par l’adresse <tt class="docutils literal">0.0.0.0</tt> si ce n’est pas déjà fait.</p>
</div>
<p>Vous devriez avoir donc cette ligne :</p>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="ss">host_ip</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
</pre></div>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;zoom&quot;:1.5,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;Electron\&quot; modified=\&quot;2019-10-19T16:20:17.375Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.1.0 Chrome/76.0.3809.139 Electron/6.0.7 Safari/537.36\&quot; etag=\&quot;NJltfC1CAG6-4ZeZadw3\&quot; version=\&quot;12.1.0\&quot; type=\&quot;device\&quot; pages=\&quot;2\&quot;&gt;&lt;diagram name=\&quot;Step-2\&quot; id=\&quot;c131klW8t6bT565_GznW\&quot;&gt;5VjbTuMwEP2aPFLFcdIkj73A7mqFWIm9AG+mcRNLaRw5Lk35+h03dtLUFQVEq136UnlO7bHnnLlAHTxZ1F8EKbNrntDc8dykdvDU8bwIYfhUwLoB/NBtgFSwpIFQB9yyZ6pBs23JElr1NkrOc8nKPjjjRUFnsocRIfiqv23O8/6tJUmpBdzOSG6jf1giMx2WF3b4V8rSTN8cRDreBTF7dSBVRhK+2oLwpYMngnPZrBb1hOaKOkNLSMPvV6O5wOzy4QI9ZPHNt18XjbOrtxxpIxC0kB/r2mtcP5F8qem6JrOMFdTxhjncNX4UsErV6jcTcqlSY8OFXBt+4RaQEozxKmOS3pZkpr5ZQTIBlslFDhaCJanKRt85qyk8aqzvpkLSekerA5Giln7IWsoXVIo1nDMpqwVb981Vpz4ymmZbyrcg0RmXtp47WmGhmX0Dy9hi+UYkrCCSLsV/wKfv/2uE+hahNo1FMlLdA6yCF7RPHbAh1ndguMa43zamdc9aG6tm8s54gPX9Ft4dUYY50byKJlaHeo0eEA5fihk9XL6SiJS+5A/v11fQnEj21H/cPrH00R+cwbPbvEA7edEmhnHRvF+f2m5NO46we8BRE6DlaJM7bTzvT6ehlU5VlVkZBVUl+2kkaMWeyeNmg5K7VA/cPDkYO8FU1ehS8qoZiZuSzVlawDqnc+VKlSqDSTXSsOSqxCuoeFakP5UxhVQ/XmHv8j60CxvvqeujlXVo6YDcQTRwB1B1oz01/vkUQYdnV3RKRaKjNFr0jkaLzrnRRt7A94a+O4xChGIvDntJgqJwEIQ4iDHyosgNXfzONhzu9/PKa47cpM3/E1u5mElZnkFT8OKgL0RsdwX/lF0BoZcadeSasfK5VdkZnmjP9IxPqor9V3HOgaCMV3IzP89iguLw4AQ9rSrBi6qcSbHg4GTFAmb3m0wzfLrftfDlXw==&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div></div>
<div class="section" id="etendre-la-portee-de-votre-machine-virtuelle">
<h5>Étendre la portée de votre machine virtuelle</h5>
<p>Si vous voulez que les autres machines de votre réseau puissent accéder elle aussi aux services de votre machine virtuelle vous pouvez modifier la ligne 26 :</p>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8000</span>
</pre></div>
<p>Dans ce cas, le port 8000 de votre machine virtuelle sera accessible via le port 8000 de votre ordinateur.</p>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;zoom&quot;:1.5,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;Electron\&quot; modified=\&quot;2019-10-19T16:27:54.784Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.1.0 Chrome/76.0.3809.139 Electron/6.0.7 Safari/537.36\&quot; etag=\&quot;bvYsO9_oSJATClRZsn9X\&quot; version=\&quot;12.1.0\&quot; type=\&quot;device\&quot; pages=\&quot;3\&quot;&gt;&lt;diagram name=\&quot;step-3\&quot; id=\&quot;oYa7kyQJZyjASMcxxCIH\&quot;&gt;5VlNc5swEP01PpZBCLA4xnHSTqeddppO2xwVkEEtRoyQazu/visQ2CCP03qCm4+TpUVaSe/tW61hgi+Xm7eSltlHkbB84rnJZoLnE89DiATwoy3bxhK2hlTyxAzaGW74PTNG11hXPGFVb6ASIle87BtjURQsVj0blVKs+8MWIu+vWtKUWYabmOa29TtPVNZYiTfd2d8xnmZm5YDg5sGStmPNQaqMJmK9Z8JXE3wphVBNa7m5ZLnGroXl/Zvk9n79jVxXV1/KhPz6vGbqTePs+l+mdCeQrFCP69prXP+m+crA9ZHGGS/YxAtzWGt2J6GV6tY3LtVKx0aNhdq2+MIqQCV0ZuuMK3ZT0lg/WUM0gS1Tyxx6CJq0Kht+F3zDYFMzszaTim0GXD1wUtTBD2HLxJIpuYV5xotvCDMBS0x3vWMftZxme8x3RmoiLu0872CFhkH2H1DGFsqfZMILqthKPgs8nxqgKLRhS0D1pluIQuMnxapINDJzF3pCqkykoqD5ByFKg+FPptTW5Cy6UqKPMCuSC52Bdi7Bcs31XmuXAKrc/ugGQ+dWP3GCtjvf7I+cb01vAS4uRS5kvXWcUEYWMdgrJcUvtvckjAm7W3TU6jOeQCzgJFYyZsfG+SYzU5myYw7x4UiRLKeK/+7v7vFp95+3kMKBkDz3vyvJRtTG0VJBTyJGAm5PAg8IgG246nQD7ds9+26K7rQzxhaAd6b4N1M/Cw7b7gIDDQODDPhu9m9m7V/yA0cQYscdNQe0HNWx053n9HAKrHCqqsyKKJCV6oeRZBW/p3f1AE13qTdYbzmYTYK5Filk56pJ1LVmc54W0M7ZQrvSWuVQ810Ys9IZflaB5HmRfq3TPYT6eMoe4h7awsYHdD2arEOLB+Q6xHEdUN3FAY2/PEbQw1UgOScj01ESLToh0aLXnGh9z/G90HdDMkUo8qJpL0gQmTrBFAcRRh4h7tTFp6VhjA/7+ctlRk7SxArFTKnyFeQELwj6PER2UvDPmRSiY2mauG1V8KJJQYOrEx24O6NzktK+uNpjJRcAUCYqVd+er+L+xPjB+/O8rKCjrLwSsWD01MRi1zVwrTooJA56ilns1Fcvj09lEAyoxDaVCJ2Ty0Ml6Yt+q9ZWx20RvLfOf6uP8V/Wx94o9TF2Iyfy/dDFJCAugSgdFK6uEwVegKZBBFU0IqeVxx4KnIFjdxDUI5fAnv1K/gtLuGSx4qIYM1/FECZMPsuMZV0+aLT/1NDdfVhrSN99ncRXfwA=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div><p>Sinon vous pouvez aussi faire en sorte que votre machine virtuelle fasse partie de votre réseau, pour cela décommentez la ligne 40.</p>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;public_network&quot;</span>
</pre></div>
<p>Maintenant votre machine virtuelle est considérée comme un appareil qui serait connecté à votre réseau.</p>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;zoom&quot;:1.5,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;Electron\&quot; modified=\&quot;2019-10-19T16:36:24.144Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.1.0 Chrome/76.0.3809.139 Electron/6.0.7 Safari/537.36\&quot; etag=\&quot;yivDdXJfRHfQ7YiqTWAv\&quot; version=\&quot;12.1.0\&quot; type=\&quot;device\&quot; pages=\&quot;4\&quot;&gt;&lt;diagram name=\&quot;page-4\&quot; id=\&quot;1MSpEVdIaEvBATusKa1R\&quot;&gt;5VjbcpswEP0aHutBEjc/xnbSTJtMO0mnTfKmgAC1GDFCju18fVcgwAQ3FzfO5DLjB+1aWknnnD3YWGQ6X32WtEhPRcQyC9vRyiIzC2PkYGzpjx2t60zQJBLJIzOpS5zzW2aStskueMTK3kQlRKZ40U+GIs9ZqHo5KqVY9qfFIuvvWtCEDRLnIc2G2V88UmlzC7/LHzOepGZnNyD1F3PazDUXKVMaieVGihxaZCqFUPVovpqyTGPXwELOji+vUurfnJzFX45Pb69i/PVTXezoKUvaG0iWq+ctbai8odnCwHVKw5TnzMJeBntNriWMEj36yaVaaG1UWKh1gy/sAlRCMFmmXLHzgob6myWoCXKpmmcQIRjSsqj5jfmKwaEmZm8mFVvd4eqBm6IWfpAtE3Om5BrWmSqOIawRrAmXHfuo4TTdYL5NUqO4pK3cwQoDg+wTUCYDlL/JiOdUsYV8E3i+NkCdIWoRNL0Jc5Fr+KRY5JEGZmZDJKRKRSJymp0IURgIfzOl1say6EKJPsAsjw60AXUlIXPE9VGrkjEMpyITsjoCiSgL4hDypZLiD9v4xgsDdh23DOmz7sAP3FcsZMjumecaf6UyYffVw9v5liyjit/0D/fs5LlvvRt6zfAKusEbADqEcSDlns7hFBdG1FVwuRnMVr1o3UQrri6aCjC+3Mh3S3TQrNi3+vEj1U/+U/1m6XfB4ditLpD9D2E0Jerzm1WbD+o7hbD3QKH6goNClXba++wuJ38gp7JMB4qCrlJ9GUlW8lt6XU3QdBf6gNWR3YnlznSPgsWWtdtWLZvxJIdxxmJdSrcqh99tByattE1PSuh4nic/Ks8G499fY9/F3Rs2NtnS13tr62DAAxrjEfKCERpB4x1safP3Rwp6xI85+yVZGe/FbNEOZos+stk6eORgz7G9wEfQFmO/pxIU+CPXJ+6YIBwEtm+T3ayYkO11HrnNno26+Ye9ocVUqeIDuAJ23T4R46EtOC/pCgg9YNaB3bjUuyYG3XmGoi0PUYRelBnnbTGz65/KPXBp95usfaO3By4h7F6k1f7YvY0kh38B&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div></div>
</div>
<div class="section" id="installation-des-dependances-du-projet">
<h4><a class="toc-backref" href="#id22">Installation des dépendances du projet</a></h4>
<p>L’un des points pratique de Vagrant c’est que l’on peut exécuter des lignes de commande lors du premier démarrage de la machine.</p>
<p>En effet grâce à l’option <tt class="docutils literal">config.vm.provision</tt> du <tt class="docutils literal">Vagrantfile</tt> vous pouvez lancer des lignes de commande au démarrage de votre machine.</p>
<p>Par exemple vous pouvez rajouter les commandes suivantes pour installer NGINX :</p>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&quot;shell&quot;</span><span class="p">,</span> <span class="ss">inline</span><span class="p">:</span> <span class="o">&lt;&lt;-</span><span class="dl">SHELL</span>
<span class="sh">  sudo apt-get update</span>
<span class="sh">  sudo apt-get install -y nginx</span>
<span class="dl">SHELL</span>
</pre></div>
<p>Ces lignes de commande devront s’éxécuter après l’installation de la machine virtuelle.
Si vous voulez les exécuter après, vous pouvez taper cette commande dans le terminal de votre ordinateur :</p>
<div class="highlight"><pre><span></span>vagrant provision
</pre></div>
<p>Si vous avez un script shell déjà à votre disposition vous pouvez l’exécuter en remplaçant de que nous avons fait plus tôt par :</p>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&quot;shell&quot;</span><span class="p">,</span> <span class="ss">path</span><span class="p">:</span> <span class="s2">&quot;script.sh&quot;</span>
</pre></div>
<p>Après l’installation de la machine virtuelle le fichier <tt class="docutils literal">script.sh</tt> devra être exécuté.</p>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Un Amorçage double ou dual-boot permet à l’utilisateur d’installer plusieurs systèmes d’exploitation sur son ordinateur et d’en choisir un lors du démarrage.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>Une version LTS (Long Term Support, Support à long terme en français) d’Ubuntu garanti le support du système pendant 5 ans.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[3]</a></td><td>L’hôte local ou localhost du machine est une adresse accessible uniquement par elle-même.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="aide-memoire">
<h3><a class="toc-backref" href="#id23">Aide-mémoire</a></h3>
<div class="section" id="commandes">
<h4><a class="toc-backref" href="#id24">Commandes</a></h4>
<ul class="simple">
<li><tt class="docutils literal">vagrant init &lt;vagrant box&gt;</tt> Crée le <tt class="docutils literal">Vagrantfile</tt> avec la boîte que vous avez choisie.</li>
<li><tt class="docutils literal">vagrant up</tt> Installe et / ou démarre la machine virtuelle configurée par le <tt class="docutils literal">Vagrantfile</tt>.</li>
<li><tt class="docutils literal">vagrant reload</tt> Redémarrer la machine virtuelle configurée par le <tt class="docutils literal">Vagrantfile</tt>.</li>
<li><tt class="docutils literal">vagrant halt</tt> Éteint la machine virtuelle configurée par le <tt class="docutils literal">Vagrantfile</tt>.</li>
<li><tt class="docutils literal">vagrant destroy</tt> Supprime la machine virtuelle configurée par le <tt class="docutils literal">Vagrantfile</tt> et l'éteint si ce n’est pas déjà fait.</li>
<li><tt class="docutils literal">vagrant provision</tt> Éxecute le script post-installation de la machine virtuelle configurée par le <tt class="docutils literal">Vagrantfile</tt>.</li>
<li><tt class="docutils literal">vagrant box update</tt> Met à jour la boîte spécifiée dans le fichier <tt class="docutils literal">Vagrantfile</tt>.</li>
</ul>
</div>
<div class="section" id="vagrantfile">
<h4><a class="toc-backref" href="#id25">Vagrantfile</a></h4>
<ul class="simple">
<li><tt class="docutils literal">config.vm.box = &quot;ubuntu/bionic64&quot;</tt> Le nom de la boîte à installer.</li>
<li><tt class="docutils literal">config.vm.box_check_update</tt> Si Vagrant doit vérifier si la boîte a des mises à jour disponible (<tt class="docutils literal">true</tt> / <tt class="docutils literal">false</tt> par défaut <tt class="docutils literal">true</tt>).</li>
<li><tt class="docutils literal">config.vm.network &quot;forwarded_port&quot;</tt> Configure une redirection de port de la machine virtuelle, voir : <a class="reference internal" href="#redirection-de-port">Redirection de port</a>.</li>
<li><tt class="docutils literal">config.vm.network &quot;private_network&quot;</tt> Crée un réseau privé entre la machine virtuelle et l’hôte.</li>
<li><tt class="docutils literal">config.vm.network &quot;public_network&quot;</tt> Permet à la machine virtuelle de rejoindre le réseau de l’hôte comme un appareil normal.</li>
<li><tt class="docutils literal">config.vm.synced_folder &lt;chemin vers un dossier de l’hôte&gt; &lt;chemin vers un dossier de la machine virtuelle&gt;</tt> Permet de rajouter un nouveau dossier à synchroniser entre la machine virtuelle et l’hôte.</li>
<li><tt class="docutils literal">config.vm.provision &quot;shell&quot;, &lt;inline | path&gt;</tt> Script post-installation de la machine virtuelle soit un chemin fait un fichier script (sh) soit directement des instructions, voir : <a class="reference internal" href="#installation-des-dependances-du-projet">Installation des dépendances du projet</a>.</li>
</ul>
<script type="text/javascript" src="https://www.draw.io/js/viewer.min.js"></script></div>
</div>
</div>

  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://lpenaud.github.io/tag/virtualisation.html">virtualisation</a>
      <a href="https://lpenaud.github.io/tag/developpement.html">développement</a>
      <a href="https://lpenaud.github.io/tag/virtualbox.html">virtualbox</a>
      <a href="https://lpenaud.github.io/tag/vagrant.html">vagrant</a>
      <a href="https://lpenaud.github.io/tag/linux.html">linux</a>
      <a href="https://lpenaud.github.io/tag/windows.html">windows</a>
    </p>
  </div>





</article>

    <footer>
<p>
  &copy; Loïc Penaud 2019 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>Propulsé par <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> thème par <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Loïc Penaud ",
  "url" : "https://lpenaud.github.io",
  "image": "",
  "description": "Site d'article sur l'informatique"
}
</script>

</body>
</html>